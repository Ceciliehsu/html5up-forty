<!DOCTYPE HTML>
<!--
	Forty by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
    <script>src="https://d3js.org/d3.v3.min.js"</script>
    <script type="text/javascript">
      var company = [],m = [],date = [],file = [];
 
      for(var j =0;j<30;j++){
         company[j] = [];
       }
       var syear,smonth,eyear,emonth,mindex = 0,index;
       function getcsv(){
         file.length = 0;
         index = 0;
         date.length = 0;
         for(var j =0;j<30;j++){
           company[j] = [];
         }
         var start = document.getElementById("start");
         //console.log(start.value.split('-'));
         var tempm = start.value.split('-');
         syear = parseInt(tempm[0]);
         smonth = parseInt(tempm[1]);
         var end = document.getElementById("end");
         //console.log(end.value.split('-'));
         tempm = end.value.split('-');
         eyear = parseInt(tempm[0]);
         emonth = parseInt(tempm[1]); 
         var i,j = 0,count = 0,year = 0,month = 0;
         if(eyear == syear ){
           index = 0;
           if(emonth == smonth){
             if( emonth <10)
               var filename = "M2M/train_"+String(eyear)+"_0"+String(emonth)+"("+String(syear)+" Q1).csv";
             else
             var filename = "M2M/train_"+String(eyear)+"_"+String(emonth)+"("+String(syear)+" Q1).csv";
             
             file.push(filename);
             }
           else if(emonth > smonth){
             count = emonth - smonth+1;
             month = smonth;
             year = syear ;
             for(i = 0;i < count ;i ++){
             if(month <10)
               var filename = "M2M/train_"+String(year)+"_0"+String(month)+"("+String(year)+" Q1).csv";
             else
               var filename = "M2M/train_"+String(year)+"_"+String(month)+"("+String(year)+" Q1).csv";
             file.push(filename);
             month++ ;
           }
           }
           else
             alert("請輸入正確日期");
           }
         else if(eyear > syear){
           index = 0;
           if(emonth > smonth){
             count = eyear - syear-1;
             count *= 12;
             count += 12 + emonth - smonth + 1;
           }
           else if (emonth <= smonth){
             count = eyear - syear ;
             count *= 12;
             count += emonth - smonth+1;
         }
           month = smonth;
           year = syear;
           for(i = 0;i < count ;i ++){
             if(month <10)
               var filename = "M2M/train_"+String(year)+"_0"+String(month)+"("+String(year)+" Q1).csv";
             else
               var filename = "M2M/train_"+String(year)+"_"+String(month)+"("+String(year)+" Q1).csv";
             
             file.push(filename);
             if(month == 12){
               month = 1;
               year += 1;
               }
             else  
               month++ ;
           }
         }
         else{
           alert("請輸入正確日期");
         }
        // dooutput();
        // var filename = "M2M/train_"+year+"_"+month+"("+year+" Q1).csv";
         //getdata(filename,company);
         getdata(file,0);
     }
     function getdata(filename,tmp){
       d3.csv(filename[tmp], function(data){
           for(var i = 0;i < data[0].length;i++){
             date.push(data[i].Date);
             for(var x in data[0]){
               company[j][i] = parseInt(data[i].x);
             }
           }
         getdata(filename,++tmp);
       });
       /*var k=0,c=0;
       console.log(filename);
       const response = await fetch(filename);
       const data = await response.text();
       //console.log(data);
       const rows =  data.split('\n');
       c = rows.length;
       rows.forEach(elt => {
         const row = elt.split(',');
         //console.log(row);
         /*for(var j=0; j<30; j++){
           company[j][i]=row[j];
           if(i > 0)
             company[j][i] = parseFloat(company[j][i]);
         }*/
         /*console.log(row[0]);
         for(var j=0; j<31; j++){
           
           //if(j == 0 && k == )
           if((c - k) == 1)
             break;
           if(k != 0 ){
             if(j != 0)
               company[j-1][index-1] = parseFloat(row[j]);
             else{
               date.push(row[j]);
               
               }
             //tmp[j][index-1]=row[j];
             //console.log(row[j]);
             //console.log(c);
             //console.log(index);
             //console.log(k);
             //console.log(tmp[j][index]); 
             //console.log(company[j][index]);
           }
           else{
           }
             //console.log(row[j]);
           //console.log(tmp[0])
           //console.log(company[0]);
     }
       k++; 
       index++;  
     })
     index -= 2;*/
     }
     function dooutput(){
       var myObj = document.getElementById("selectTest");
       var newdate = [];
       newdate.length = 0;
       //console.log(company[0]);
       //console.log(date);
       for(var i=0;i<date.length;i++){
         newdate.push(date[i].split("/"));
       }
     var dataPoints = [];
     var y = 0,count = 0,dateindex = 0;
     var data = [];var dataSeries = { type: "spline" };
     var tmp = parseInt(myObj.value);
     //console.log(company[0].length-1); 
     for(var j = 0;j < company[0].length;j++){
       //console.log(newdate[dateindex][0]);
       //console.log(newdate[dateindex][1]);
       //console.log(newdate[dateindex][2]);
       dataPoints.push({x: new Date(newdate[dateindex][0]+"-"+newdate[dateindex][1]+"-"+newdate[dateindex++][2]),y:company[tmp][j]});
     }
     //parseInt(newdate[dateindex][0]),parseInt(newdate[dateindex][1]),parseInt(newdate[dateindex++][2])
    // console.log(dataPoints);
     dataSeries.dataPoints = dataPoints;
     data.push(dataSeries);
     var stockChart = new CanvasJS.StockChart("stockChartContainer", {
     exportEnabled: true,
     animationEnabled: true,
     // exportEnabled: true,
 title: {
   text:"  歷史股價"
 },
 charts: [{
   axisX: {  
     viewportMinimum: 0,
     minimum:0,
     title: "Date",
     crosshair: { 
       enabled: true,
       snapToDataPoint: true,
     }
   },
   axisY: {
     //viewportMinimum: 1,
     title: "Dollars",
     prefix: "$",
     crosshair: {
       enabled: true,
       //snapToDataPoint: true,
     }
   },
   data: [{
     type: "line",
     yValueFormatString: "$#,###.##",
     dataPoints : dataPoints
   }]
 }],
 data:data,
 navigator: {
   slider: {
     minimum: new Date(syear, smonth, 01),
     maximum: new Date(eyear, emonth, 20)
   }
 }
,
 rangeSelector: {
     enabled:true,
     inputFields: {
       viewportMinimum: 1,
       minimum:1,
       //endValue: 20,
       valueFormatString: 	"MM-DD-YYYY"
     },
     buttons: [{
       label: "a week",        
       range: 1,
       rangeType: "week"
     },{
       label: "a month",        
       range: 1,
       rangeType: "month"
     },{
       label: "a season",        
       range: 3,
       rangeType: "month"
     },{
       label: "a year",        
       range: 1,
       rangeType: "year"
     },
     {
     label: "All ",        
     rangeType: "all"
   }]
   }
});
 stockChart.render();
}
function indice() {
var chart = new CanvasJS.Chart("chartContainer2", {
animationEnabled: true,
theme: "light2",
title:{
 text: "Simple Line Chart"
},
data: [{        
 type: "line",
     indexLabelFontSize: 16,
 dataPoints: [
   { y: 450 },
   { y: 414},
   { y: 520, indexLabel: "\u2191 highest",markerColor: "red", markerType: "triangle" },
   { y: 460 },
   { y: 450 },
   { y: 500 },
   { y: 480 },
   { y: 480 },
   { y: 410 , indexLabel: "\u2193 lowest",markerColor: "DarkSlateGrey", markerType: "cross" },
   { y: 500 },
   { y: 480 },
   { y: 510 }
 ]
}]
});
chart.render();

}
   </script> 
		<title>MARKET</title>
    <meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
        <script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.stock.min.js"></script>
    </head>
	<body class="is-preload" style="background-color:rgb(47,70,110) ">
    
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header" class="alt">
						<a href="index.html" class="logo"><strong>WIN</strong> <span>THE JACKPOT</span></a>
						<nav>
							<a href="#menu">Menu</a>
						</nav>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<ul class="links">
							<li><a href="index.html">Home</a></li>
							<li><a href="market.html">Market</a></li>
							<li><a href="news.html">News</a></li>
							<li><a href="https://alvintang0925.github.io/QTSweb/">WatchList</a></li>
							<li><a href="elements.html">Game</a></li>
							<li><a href="elements.html">Setting</a></li>
						</ul>
						<ul class="actions stacked">
							<li><a href="#" class="button primary fit">Get Started</a></li>
							<li><a href="#" class="button fit">Log In</a></li>
						</ul>
					</nav>

				<!-- Banner -->
					<section id="banner" class="major">
						<div class="inner">
							<header class="major">
								<h1>MARKET</h1>
							</header>
							<div class="content">
								<p>股金中外，值得信賴</p>
								<ul class="actions">
									<li><a href="#one" class="button next scrolly">Get Started</a></li>
								</ul>
							</div>
						</div>
					</section>

        <!-- Main -->
        <!-- 頁籤 -->
        <div id="tab-demo">
          <ul class="tab-title">
              <li><a href="#tab01">今日股價</a></li>
              <li><a href="#tab02">歷史股價</a></li>
              <li><a href="#tab03">指數</a></li>
          </ul>
          <div id="tab01" class="tab-inner">
                    <!-- 股價表-->
                    <center><table id="fruit_table" style="height: 150px; width: 70%;">     
                         <colgroup>
                           <col style="background:rgb(8, 0, 0)">
                           <col span="5" style="background:rgb(7, 0, 0)">
                         </colgroup>
                         <h2 >今日股價</h2>
                         <thead>
                           <tr>
                             <th id="fruit_name">NAME</th>
                             <th id="fruit_price">LAST</th>
                             <th id="fruit_inventory">HIGH</th>
                             <th id="fruit_inventory">LOW</th>
                             <th id="fruit_inventory">CHG.</th>
                             <th id="fruit_inventory">VOL.</th>
                           </tr>
                         </thead>
                         <tbody>
                           <tr>
                             <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="0" name="mybutton" value="AAPL"  onclick="dooutput(this)"></td>
                             <td headers="fruit_price">164.35</td>
                             <td headers="fruit_inventory">164.39</td>
                             <td headers="fruit_price">161.64</td>
                             <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                             <td headers="fruit_inventory">1.14M</td>
                           </tr>
                           <tr>
                             <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="1" name="mybutton" value="AXP" onclick="dooutput(this)"></td>
                             <td headers="fruit_price">132.21</td>
                             <td headers="fruit_inventory">132.90</td>
                             <td headers="fruit_price">130.53</td>
                             <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                             <td headers="fruit_inventory">71.37M</td>
                           </tr>
                           <tr>
                             <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="2" name="mybutton" value="BA" onclick="dooutput(this)"></td>
                             <td headers="fruit_price">41.92</td>
                             <td headers="fruit_inventory">42.03</td>
                             <td headers="fruit_price">41.50</td>
                             <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                             <td headers="fruit_inventory">9.18M</td>
                           </tr>
                           <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="3" name="mybutton" value="CAT" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="4" name="mybutton" value="CSCO" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="5" name="mybutton" value="CVX" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="6" name="mybutton" value="DIS" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="7" name="mybutton" value="DD" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="8 "name="mybutton" value="GS" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="9" name="mybutton" value="HD" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="10" name="mybutton" value="IBM" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="11" name="mybutton" value="INTC" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="12" name="mybutton" value="JNJ" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="13" name="mybutton" value="KO" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="14" name="mybutton" value="MCD" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="15" name="mybutton" value="MMM" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="16" name="mybutton" value="MRK" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="17" name="mybutton" value="MSFT" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="18" name="mybutton" value="NKE" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="19" name="mybutton" value="PFE" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="20" name="mybutton" value="PG" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="21" name="mybutton" value="TRV" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="22" name="mybutton" value="UNH" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="23" name="mybutton" value="UTX" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="24" name="mybutton" value="V" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="25" name="mybutton" value="VZ" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="26" name="mybutton" value="BA" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="27" name="mybutton" value="WBA" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">164.35</td>
                            <td headers="fruit_inventory">164.39</td>
                            <td headers="fruit_price">161.64</td>
                            <td headers="fruit_inventory " style="color:green;">+0.84%</td>
                            <td headers="fruit_inventory">1.14M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="28" name="mybutton" value="WMT" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">132.21</td>
                            <td headers="fruit_inventory">132.90</td>
                            <td headers="fruit_price">130.53</td>
                            <td headers="fruit_inventory" style="color:green;">+2.43%</td>
                            <td headers="fruit_inventory">71.37M</td>
                          </tr>
                          <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="29" name="mybutton" value="XOM" onclick="dooutput(this)"></td>
                            <td headers="fruit_price">41.92</td>
                            <td headers="fruit_inventory">42.03</td>
                            <td headers="fruit_price">41.50</td>
                            <td headers="fruit_inventory" style="color:red;">-0.70%</td>
                            <td headers="fruit_inventory">9.18M</td>
                          </tr>
                         </tbody>
                       </table></center>
                    </div>
          <div id="tab02" class="tab-inner"> 
             <!-- 股價圖-->
                    <!--button type="button" onclick="dooutput()">確認 onchange="dooutput(this)"</button-->
                    <center><h2 >歷史股價</h2></center>
                    <center><input type="month" id="start" value="2019-06" min="2009-12" max="2019-11"  style = "height: 46px; " ><input type="month" id="end" value="2019-11" min="2009-12" max="2019-11"  style = "height: 46px; " ><button onclick="getcsv();" >確認</button></center>
                    <center><select name="select" id="selectTest" onclick=" dooutput();">
                      <option>請選擇公司</option>
                      <option value="0" id="AAPL" >AAPL</option>
                      <option value="1" id="AXP">AXP</option>
                      <option value="2" id="BA">BA</option>
                      <option value="3" id="CAT">CAT</option>
                      <option value="4" id="CSCO">CSCO</option>
                      <option value="5" id="CVX">CVX</option>
                      <option value="6" id="DIS">DIS</option>
                      <option value="7" id="DD">DD</option>
                      <option value="8" id="GS">GS</option>
                      <option value="9" id="HD">HD</option>
                      <option value="10" id="IBM">IBM</option>
                      <option value="11" id="INTC">INTC</option>
                      <option value="12" id="JNJ">JNJ</option>
                      <option value="13" id="KO">KO</option>
                      <option value="14" id="MCD">MCD</option>
                      <option value="15" id="MMM">MMM</option>
                      <option value="16" id="MRK">MRK</option>
                      <option value="17" id="MSFT">MSFT</option>
                      <option value="18" id="NKE">NKE</option>
                      <option value="19" id="PFE">PFE</option>
                      <option value="20" id="PG">PG</option>
                      <option value="21" id="TRV">TRV</option>
                      <option value="22" id="UNH">UNH</option>
                      <option value="23" id="UTX">UTX</option>
                      <option value="24" id="V">V</option>
                      <option value="25" id="VZ">VZ</option>
                      <option value="26" id="BA">BA</option>
                      <option value="27" id="WBA">WBA</option>
                      <option value="28" id="WMT">WMT</option>
                      <option value="29" id="XOM">XOM</option>
                  </select></center>
                  <center><div id="stockChartContainer" style="height: 400px; width: 80%;"></div></center>
          </div>
          <div id="tab03" class="tab-inner"> 
                        <center><table id="fruit_table" style="height: 150px; width: 70%;">     
                          <colgroup>
                            <col style="background:rgb(8, 0, 0)">
                            <col span="5" style="background:rgb(7, 0, 0)">
                          </colgroup>
                        <h2 >指數</h2>
                         <tbody>
                           <tr>
                             <td headers="fruit_name" style="font-weight:bold; "> <input type="button" id="0" name="mybutton" value="DOW30" mouseover="indice()" ></td>
                             <td headers="fruit_price">27,194.23</td>
                             <td headers="fruit_price" style="color: green;">+0.17%</td>
                             <td id="chartContainer2" style="height: 50px; width: 100px;"></td>
                           </tr>
                           <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="0" name="mybutton" value="S&P"  ></td>
                            <td headers="fruit_price">3,295.29</td>
                            <td headers="fruit_price" style="color: green;">+0.43%</td>
                            <td id="chartContainer2" style="height: 50px; width: 100px;"></td>
                           </tr>
                           <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="0" name="mybutton" value="Nasdaq"  ></td>
                            <td headers="fruit_price">10,828.58</td>
                            <td headers="fruit_price" style="color: green;">+0.46%</td>
                            <td id="chartContainer2" style="height: 50px; width: 100px;"></td>
                           <tr>
                            <td headers="fruit_name" style="font-weight:bold;"><input type="button" id="0" name="mybutton" value="Russell 2000"  ></td>
                             <td headers="fruit_price">1,484.19</td>
                             <td headers="fruit_price" style="color: green;">+0.47%</td>
                             <td id="chartContainer2" style="height: 50px; width: 100px;"></td>
                          </tr>
                        </tbody>
                      </table></center>
                     
                      
          </div>
        </div>
			</div>

		<!-- Scripts -->
    
    
      <script type="text/javascript">
         var company = [],m = [],date = [],file = [];
    
         for(var j =0;j<30;j++){
            company[j] = [];
          }
          var syear,smonth,eyear,emonth,mindex = 0,index;
          function getcsv(){
            file.length = 0;
            index = 0;
            date.length = 0;
            for(var j =0;j<30;j++){
              company[j] = [];
            }
            var start = document.getElementById("start");
            //console.log(start.value.split('-'));
            var tempm = start.value.split('-');
            syear = parseInt(tempm[0]);
            smonth = parseInt(tempm[1]);
            var end = document.getElementById("end");
            //console.log(end.value.split('-'));
            tempm = end.value.split('-');
            eyear = parseInt(tempm[0]);
            emonth = parseInt(tempm[1]); 
            var i,j = 0,count = 0,year = 0,month = 0;
            if(eyear == syear ){
              index = 0;
              if(emonth == smonth){
                if( emonth <10)
                  var filename = "M2M/train_"+String(eyear)+"_0"+String(emonth)+"("+String(syear)+" Q1).csv";
                else
                var filename = "M2M/train_"+String(eyear)+"_"+String(emonth)+"("+String(syear)+" Q1).csv";
                
                file.push(filename);
                }
              else if(emonth > smonth){
                count = emonth - smonth+1;
                month = smonth;
                year = syear ;
                for(i = 0;i < count ;i ++){
                if(month <10)
                  var filename = "M2M/train_"+String(year)+"_0"+String(month)+"("+String(year)+" Q1).csv";
                else
                  var filename = "M2M/train_"+String(year)+"_"+String(month)+"("+String(year)+" Q1).csv";
                file.push(filename);
                month++ ;
              }
              }
              else
                alert("請輸入正確日期");
              }
            else if(eyear > syear){
              index = 0;
              if(emonth > smonth){
                count = eyear - syear-1;
                count *= 12;
                count += 12 + emonth - smonth + 1;
              }
              else if (emonth <= smonth){
                count = eyear - syear ;
                count *= 12;
                count += emonth - smonth+1;
            }
              month = smonth;
              year = syear;
              for(i = 0;i < count ;i ++){
                if(month <10)
                  var filename = "M2M/train_"+String(year)+"_0"+String(month)+"("+String(year)+" Q1).csv";
                else
                  var filename = "M2M/train_"+String(year)+"_"+String(month)+"("+String(year)+" Q1).csv";
                
                file.push(filename);
                if(month == 12){
                  month = 1;
                  year += 1;
                  }
                else  
                  month++ ;
              }
            }
            else{
              alert("請輸入正確日期");
            }
           // dooutput();
           // var filename = "M2M/train_"+year+"_"+month+"("+year+" Q1).csv";
            //getdata(filename,company);
            getdata(file,0);
        }
        function getdata(filename,tmp){
          d3.csv(filename[tmp], function(data){
              for(var i = 0;i < data[0].length;i++){
                date.push(data[i].Date);
                for(var x in data[0]){
                  company[j][i] = parseInt(data[i].x);
                }
              }
            getdata(filename,++tmp);
          });
          /*var k=0,c=0;
          console.log(filename);
          const response = await fetch(filename);
          const data = await response.text();
          //console.log(data);
          const rows =  data.split('\n');
          c = rows.length;
          rows.forEach(elt => {
            const row = elt.split(',');
            //console.log(row);
            /*for(var j=0; j<30; j++){
              company[j][i]=row[j];
              if(i > 0)
                company[j][i] = parseFloat(company[j][i]);
            }*/
            /*console.log(row[0]);
            for(var j=0; j<31; j++){
              
              //if(j == 0 && k == )
              if((c - k) == 1)
                break;
              if(k != 0 ){
                if(j != 0)
                  company[j-1][index-1] = parseFloat(row[j]);
                else{
                  date.push(row[j]);
                  
                  }
                //tmp[j][index-1]=row[j];
                //console.log(row[j]);
                //console.log(c);
                //console.log(index);
                //console.log(k);
                //console.log(tmp[j][index]); 
                //console.log(company[j][index]);
              }
              else{
              }
                //console.log(row[j]);
              //console.log(tmp[0])
              //console.log(company[0]);
        }
          k++; 
          index++;  
        })
        index -= 2;*/
        }
        function dooutput(){
          var myObj = document.getElementById("selectTest");
          var newdate = [];
          newdate.length = 0;
          //console.log(company[0]);
          //console.log(date);
          for(var i=0;i<date.length;i++){
            newdate.push(date[i].split("/"));
          }
        var dataPoints = [];
        var y = 0,count = 0,dateindex = 0;
        var data = [];var dataSeries = { type: "spline" };
        var tmp = parseInt(myObj.value);
        //console.log(company[0].length-1); 
        for(var j = 0;j < company[0].length;j++){
          //console.log(newdate[dateindex][0]);
          //console.log(newdate[dateindex][1]);
          //console.log(newdate[dateindex][2]);
          dataPoints.push({x: new Date(newdate[dateindex][0]+"-"+newdate[dateindex][1]+"-"+newdate[dateindex++][2]),y:company[tmp][j]});
        }
        //parseInt(newdate[dateindex][0]),parseInt(newdate[dateindex][1]),parseInt(newdate[dateindex++][2])
       // console.log(dataPoints);
        dataSeries.dataPoints = dataPoints;
        data.push(dataSeries);
        var stockChart = new CanvasJS.StockChart("stockChartContainer", {
        exportEnabled: true,
        animationEnabled: true,
        // exportEnabled: true,
    title: {
      text:"  歷史股價"
    },
    charts: [{
      axisX: {  
        viewportMinimum: 0,
        minimum:0,
        title: "Date",
        crosshair: { 
          enabled: true,
          snapToDataPoint: true,
        }
      },
      axisY: {
        //viewportMinimum: 1,
        title: "Dollars",
        prefix: "$",
        crosshair: {
          enabled: true,
          //snapToDataPoint: true,
        }
      },
      data: [{
        type: "line",
        yValueFormatString: "$#,###.##",
        dataPoints : dataPoints
      }]
    }],
    data:data,
    navigator: {
      slider: {
        minimum: new Date(syear, smonth, 01),
        maximum: new Date(eyear, emonth, 20)
      }
    }
  ,
    rangeSelector: {
        enabled:true,
        inputFields: {
          viewportMinimum: 1,
          minimum:1,
          //endValue: 20,
          valueFormatString: 	"MM-DD-YYYY"
        },
        buttons: [{
          label: "a week",        
          range: 1,
          rangeType: "week"
        },{
          label: "a month",        
          range: 1,
          rangeType: "month"
        },{
          label: "a season",        
          range: 3,
          rangeType: "month"
        },{
          label: "a year",        
          range: 1,
          rangeType: "year"
        },
        {
        label: "All ",        
        rangeType: "all"
      }]
      }
  });
    stockChart.render();
}
function indice() {
var chart = new CanvasJS.Chart("chartContainer2", {
	animationEnabled: true,
	theme: "light2",
	title:{
		text: "Simple Line Chart"
	},
	data: [{        
		type: "line",
      	indexLabelFontSize: 16,
		dataPoints: [
			{ y: 450 },
			{ y: 414},
			{ y: 520, indexLabel: "\u2191 highest",markerColor: "red", markerType: "triangle" },
			{ y: 460 },
			{ y: 450 },
			{ y: 500 },
			{ y: 480 },
			{ y: 480 },
			{ y: 410 , indexLabel: "\u2193 lowest",markerColor: "DarkSlateGrey", markerType: "cross" },
			{ y: 500 },
			{ y: 480 },
			{ y: 510 }
		]
	}]
});
chart.render();

}
      </script> 
      <!-- 頁籤Scripts -->
      <script> 
      $(function(){
    var $li = $('ul.tab-title li');
        $($li. eq(0) .addClass('active').find('a').attr('href')).siblings('.tab-inner').hide();
    
        $li.click(function(){
            $($(this).find('a'). attr ('href')).show().siblings ('.tab-inner').hide();
            $(this).addClass('active'). siblings ('.active').removeClass('active');
        });
    });
      </script>
      <script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
      <script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
	</body>
</html>